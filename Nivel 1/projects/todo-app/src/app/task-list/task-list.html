<section class="task-list">
  <h2>Mis tareas</h2>

  <p class="empty" *ngIf="tasks.length === 0; else list">
    No hay tareas registradas todavía. ¡Agrega la primera!
  </p>

  <ng-template #list>
    <ul>
      <li *ngFor="let task of tasks; trackBy: trackById" [class.completed]="task.completed">
        <div class="task-content">
          <header>
            <h3>{{ task.title | uppercase }}</h3>
            <span class="badge" [class.done]="task.completed">
              {{ task.completed ? 'Completada' : 'Pendiente' }}
            </span>
          </header>

          <p *ngIf="task.description; else emptyDescription">{{ task.description }}</p>
          <ng-template #emptyDescription>
            <p class="muted">Sin descripción</p>
          </ng-template>

          <small>Creada el {{ task.createdAt | date:'medium' }}</small>
        </div>

        <div class="task-actions">
          <button type="button" (click)="toggle(task)">
            {{ task.completed ? 'Marcar pendiente' : 'Marcar completada' }}
          </button>
          <button type="button" (click)="editTask(task)">Editar</button>
          <button type="button" (click)="deleteTask(task.id)">Eliminar</button>
        </div>
      </li>
    </ul>
  </ng-template>
</section>